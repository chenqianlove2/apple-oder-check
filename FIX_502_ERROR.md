# ğŸš¨ 502 é”™è¯¯æ’æŸ¥æŒ‡å—

## é—®é¢˜ï¼šè®¿é—® app.moneych.top å‡ºç° 502 Bad Gateway

è¿™è¯´æ˜ 1Panel åå‘ä»£ç†å·²é…ç½®ï¼Œä½†æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡ã€‚

---

## ğŸ” ç¬¬ä¸€æ­¥ï¼šSSH ç™»å½•åˆ°æœåŠ¡å™¨

```bash
ssh user@162.43.39.81
```

è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
```bash
cd /path/to/apple_order_query
```

---

## ğŸ©º ç¬¬äºŒæ­¥ï¼šè¿è¡Œè¯Šæ–­

```bash
./diagnose.sh
```

è¿™ä¼šæ˜¾ç¤ºï¼š
- âœ… æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œ
- âœ… ç«¯å£æ˜¯å¦æ­£å¸¸
- âœ… æ—¥å¿—ä¿¡æ¯
- âœ… å…·ä½“çš„ä¿®å¤å»ºè®®

---

## ğŸ”§ ç¬¬ä¸‰æ­¥ï¼šå¿«é€Ÿä¿®å¤ï¼ˆæ¨èï¼‰

```bash
./fix_server.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åœæ­¢æ—§è¿›ç¨‹
2. æ£€æŸ¥ç¯å¢ƒå’Œä¾èµ–
3. é‡æ–°å¯åŠ¨æœåŠ¡
4. éªŒè¯æ˜¯å¦æ­£å¸¸

---

## ğŸ¯ ç¬¬å››æ­¥ï¼šæ‰‹åŠ¨æ’æŸ¥ï¼ˆå¦‚æœå¿«é€Ÿä¿®å¤å¤±è´¥ï¼‰

### 1. æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
```bash
ps aux | grep web_server
```

### 2. å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
```bash
./start_server_bg.sh
```

### 3. æŸ¥çœ‹æ—¥å¿—
```bash
tail -f web_server.log
```

### 4. æµ‹è¯•æœ¬åœ°è®¿é—®
```bash
curl http://127.0.0.1:8846/
```

å¦‚æœèƒ½çœ‹åˆ° HTML å†…å®¹ï¼Œè¯´æ˜æœåŠ¡æ­£å¸¸ã€‚

### 5. æ£€æŸ¥ 1Panel åå‘ä»£ç†é…ç½®

ç™»å½• 1Panel â†’ ç½‘ç«™ â†’ æ‰¾åˆ° app.moneych.top

ç¡®è®¤é…ç½®ï¼š
- âœ… ä»£ç†åœ°å€ï¼š`http://127.0.0.1:8846`
- âœ… çŠ¶æ€ï¼šè¿è¡Œä¸­

---

## ğŸ”„ å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æœåŠ¡æœªè¿è¡Œ
```bash
./start_server_bg.sh
```

### é—®é¢˜ 2: ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹æ˜¯è°å ç”¨äº†ç«¯å£
lsof -i :8846

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# é‡æ–°å¯åŠ¨
./start_server_bg.sh
```

### é—®é¢˜ 3: Python æ¨¡å—ç¼ºå¤±
```bash
pip3 install requests
```

æˆ–è€…ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š
```bash
source venv/bin/activate
pip install requests
```

### é—®é¢˜ 4: æƒé™é—®é¢˜
```bash
chmod +x *.sh
chmod 644 *.py
```

### é—®é¢˜ 5: 1Panel åå‘ä»£ç†é…ç½®é”™è¯¯

ç¡®ä¿ä»£ç†åœ°å€æ˜¯ï¼š
```
http://127.0.0.1:8846
```

**æ³¨æ„**ï¼š
- âœ… ä½¿ç”¨ `127.0.0.1` è€Œä¸æ˜¯ `localhost`
- âœ… ä½¿ç”¨ `http://` è€Œä¸æ˜¯ `https://`
- âœ… ç«¯å£æ˜¯ `8846` è€Œä¸æ˜¯ `8845`

---

## âœ… éªŒè¯ä¿®å¤æˆåŠŸ

### 1. åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•
```bash
curl http://127.0.0.1:8846/
```
åº”è¯¥çœ‹åˆ° HTML å†…å®¹ï¼ˆä»¥ `<!DOCTYPE html>` å¼€å¤´ï¼‰

### 2. æµè§ˆå™¨è®¿é—®
```
http://app.moneych.top/
```
åº”è¯¥èƒ½çœ‹åˆ°è‹¹æœè®¢å•ç›‘æ§ç•Œé¢

---

## ğŸ“ ä»ç„¶æœ‰é—®é¢˜ï¼Ÿ

è¿è¡Œå®Œæ•´è¯Šæ–­å¹¶å‘é€ç»“æœï¼š
```bash
./diagnose.sh > diagnostic_report.txt
cat diagnostic_report.txt
```

æ£€æŸ¥é¡¹ç›®æ–‡ä»¶æ˜¯å¦å®Œæ•´ï¼š
```bash
ls -la *.py *.sh
```

å¿…éœ€çš„æ–‡ä»¶ï¼š
- âœ… web_server.py
- âœ… web_monitor.py
- âœ… monitor.py
- âœ… notifier.py
- âœ… order_loader.py
- âœ… start_server_bg.sh

---

## ğŸ‰ æˆåŠŸåçš„è®¿é—®åœ°å€

- ğŸ“Š ç›‘æ§é¢æ¿: http://app.moneych.top/
- ğŸ” æ‰¹é‡æŸ¥è¯¢: http://app.moneych.top/query
- âš™ï¸ ç³»ç»Ÿè®¾ç½®: http://app.moneych.top/settings
